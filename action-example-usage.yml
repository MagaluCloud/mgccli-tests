# Exemplo de como usar a action mgccli-tests com outputs

      - name: Run tests
        id: mgccli-tests
        uses: MagaluCloud/mgccli-tests@v0.0.14
        continue-on-error: true
        env:
          MGC_API_KEY: ${{ secrets.MGC_API_KEY || '' }}
          MGC_PATH: "mgc/cli/mgc"

      - name: Print test output
        run: |
          echo "=== OUTPUT DOS TESTES ==="
          echo "${{ steps.mgccli-tests.outputs.test-output }}"
          echo "=== CÓDIGO DE SAÍDA ==="
          echo "${{ steps.mgccli-tests.outputs.test-exit-code }}"

      - name: Check test results
        if: steps.mgccli-tests.outputs.test-exit-code != '0'
        run: |
          echo "❌ Testes falharam com código: ${{ steps.mgccli-tests.outputs.test-exit-code }}"
          exit 1

      # Exemplo de como postar o output no PR (opcional)
      - name: Comment on PR
        if: github.event_name == 'pull_request' && steps.mgccli-tests.outputs.test-exit-code != '0'
        uses: actions/github-script@v7
        with:
          script: |
            const output = `## ❌ Testes MGCCLI Falharam
            
            \`\`\`
            ${context.payload.steps.mgccli-tests.outputs.test-output}
            \`\`\`
            
            Código de saída: ${context.payload.steps.mgccli-tests.outputs.test-exit-code}`;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: output
            }); 